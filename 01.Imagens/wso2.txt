For integrator:

docker run -it \
-p 8280:8280 \
-p 8243:8243 \
-p 9443:9443 \
wso2/wso2ei-integrator

For analytics dashboard:

docker run -it \
-p 9713:9713 \
-p 9643:9643 \
-p 9613:9613 \
-p 7713:7713 \
-p 7613:7613  \
wso2/wso2ei-analytics-dashboard

For analytics worker:

docker run -it \
-p 9091:9091 \
-p 9444:9444 \
-p 9712:9712 \
-p 9612:9612 \
-p 7712:7712 \
-p 7612:7612 \
-p 7070:7070 \
-p 7443:7443 \ 
wso2/wso2ei-analytics-worker

For business process:

docker run -it \
-p 9445:9445 \
wso2/wso2ei-business-process

For broker:

docker run -it \
-p 5675:5675 \
-p 9446:9446 \
-p 8675:8675 \
-p 1886:1886 \
-p 8836:8836 \
-p 7614:7614 \
wso2/wso2ei-broker

Once the container is started, access the management consoles of each profile via the following URLs on your favorite web browser using the credentials
username: admin and password: admin.

For integrator:

https://localhost:9443/carbon

For analytics dashboard:

https://localhost:9643/portal

For business process:

https://localhost:9445/carbon

For broker:

https://localhost:9446/carbon


________________________________________________________________________
__Instalação Personalizada

https://github.com/wso2/docker-apim
https://github.com/wso2/docker-apim/tree/master/docker-compose/apim-with-analytics

git clone https://github.com/wso2/docker-apim
Criar conta no WSO em https://wso2.com/ para acessar o respositório docker oficial https://docker.wso2.com/

1º Passo - Alterar os Dockfiles para baixar a versão CENTOS dos containers
__Alterar o Dockfile do API Manager
cd docker-apim-3.2.x\docker-compose\apim-with-analytics\dockerfiles
ou
cd docker-apim-master/docker-compose/apim-with-analytics/dockerfiles/apim
ls
nano Dockerfile

docker-apim-3.2.x\docker-compose\apim-with-analytics\dockerfiles\apim\
editar o Dockerfile na pasta
Acessar o repositório oficial do API Manager em https://docker.wso2.com/tags.php?repo=wso2am e ver a tag do centos 3.2

alterar a linha 20
FROM docker.wso2.com/wso2am:3.2.0
para
FROM docker.wso2.com/wso2am:3.2.0-centos7

Ctrl+O, Enter, Ctrl+X
 
caso não consiga logar no repositório do WSO pelo servidor, alterar a tag para chamar a imagem do Docker HUB https://hub.docker.com/r/wso2/wso2am/tags
FROM wso2/wso2am:3.2.0-centos

__Alterar o Dockfile do API Manager Analytics Dashboard
cd ..
cd apim-analytics-dashboard
nano Dockerfile

docker-apim-3.2.x\docker-compose\apim-with-analytics\dockerfiles\apim-analytics-dashboard
editar o Dockerfile na pasta
Acessar o repositório oficial do API Manager em https://docker.wso2.com/tags.php?repo=wso2am-analytics-dashboard e ver a tag do centos 3.2

alterar a linha 20
FROM docker.wso2.com/wso2am-analytics-dashboard:3.2.0
para
FROM docker.wso2.com/wso2am-analytics-dashboard:3.2.0-centos

Ctrl+O, Enter, Ctrl+X

docker login docker.wso2.com

caso não consiga logar no repositório do WSO pelo servidor, alterar a tag para chamar a imagem do Docker HUB https://hub.docker.com/r/wso2/wso2am-analytics-dashboard/tags
FROM wso2/wso2am-analytics-dashboard:3.2.0-centos

__Alterar o Dockfile do API Manager Analytics Worker
docker-apim-3.2.x\docker-compose\apim-with-analytics\dockerfiles\apim-analytics-worker
editar o Dockerfile na pasta
Acessar o repositório oficial do API Manager em https://docker.wso2.com/tags.php?repo=wso2am-analytics-worker e ver a tag do centos 3.2

alterar a linha 20
FROM docker.wso2.com/wso2am-analytics-worker:3.2.0
para
FROM docker.wso2.com/wso2am-analytics-worker:3.2.0-centos

caso não consiga logar no repositório do WSO pelo servidor, alterar a tag para chamar a imagem do Docker HUB https://hub.docker.com/r/wso2/wso2am-analytics-worker
FROM wso2/wso2am-analytics-worker:3.2.0

________________________________________________________________________
__2º Passo - Personalizando os CONF
__PASTA apim
Alterar o conf do APIMANAGER em docker-apim-3.2.x\docker-compose\apim-with-analytics\conf\apim\repository\conf
cd docker-apim-master/docker-compose/apim-with-analytics/conf/apim/repository/conf

editar o arquivo deployment.toml
nano deployment.toml

alterar todos os localhost para url do servidor
seuDominio.com

pode alterar também a linha 3
de
node_ip = "127.0.0.1"
para 
node_ip = "SeuIPdoDominio"

alterar a senha de admin para adminPower
de
[super_admin]
username = "admin"
password = "admin"
create_admin_account = true

para
[super_admin]
username = "admin"
password = "adminPower"
create_admin_account = true

__ALTERAR O ARQUIVO DE CONFIGURAÇÃO DO ANALYTICS DASHBOARD
__Pasta apim-analytics-dashboard
cd docker-apim-master/docker-compose/apim-with-analytics/conf/apim-analytics-dashboard/conf/dashboard
docker-apim-3.2.x\docker-compose\apim-with-analytics\conf\apim-analytics-dashboard\conf\dashboard

editar o arquivo deployment.yaml
nano deployment.yaml

alterar todos os localhost para url do servidor 
seuDominio.com

ALTERAR TODOS OS CAMPOS DE PASSWORD admin para adminPower
de
linha 340 password: admin
linha 386 adminPassword: admin
linha 391 kmPassword: admin
para
linha 340 password: adminPower
linha 386 adminPassword: adminPower
linha 391 kmPassword: adminPower

__ALTERAR O ARQUIVO DE CONFIGURAÇÃO DO ANALYTICS WORKER
__Pasta apim-analytics-worker
docker-apim-3.2.x\docker-compose\apim-with-analytics\conf\apim-analytics-worker\conf\worker
editar o arquivo deployment.yaml

alterar todos os localhost para url do servidor
seuDominio.com

SÓ TERA UM LOCALHOST PARA ALTERAR 
grpc://localhost:9806/org.wso2.analytics.mgw.grpc.service.AnalyticsSendService/sendAnalytics
para
grpc://seuDominio.com:9806/org.wso2.analytics.mgw.grpc.service.AnalyticsSendService/sendAnalytics

Alterar a senha na seção. A senha está codificada em BASE64
https://www.base64encode.org/

senha admin = YWRtaW4=
senha adminPower = YWRtaW5Qb3dlcg==

de
# Authentication configuration

auth.configs:
  type: 'local'        # Type of the IdP client used
  userManager:
    adminRole: admin   # Admin role which is granted all permissions
    userStore:         # User store
      users:
        -
          user:
            username: admin
            password: YWRtaW4=
            roles: 1
            
para
# Authentication configuration

auth.configs:
  type: 'local'        # Type of the IdP client used
  userManager:
    adminRole: admin   # Admin role which is granted all permissions
    userStore:         # User store
      users:
        -
          user:
            username: admin
            password: YWRtaW5Qb3dlcg==
            roles: 1


cd docker-apim/docker-compose/apim-with-analytics

docker-compose up --build

Access the WSO2 API Manager web UIs using the below URLs via a web browser.

https://localhost:9443/publisher
https://localhost:9443/devportal
https://localhost:9443/admin
https://localhost:9443/carbon
Login to the web UIs using following credentials.

Username: admin
Password: admin
Please note that API Gateway will be available on following ports.

https://localhost:8243
https://localhost:8280
Access the WSO2 API Manager Analytics web UIs using the below URL via a web browser.

https://localhost:9643/analytics-dashboard
Login to the web UIs using following credentials.

Username: admin
Password: admin
