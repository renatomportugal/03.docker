Baixar
docker pull owncloud

_______________________________________________________________________________
__Nova instalação MySQL________________________________________________________
Depois de rodar o container, acesse o local onde instalou, aqui estou no localhost.
Criar conta de administrador, coloque usuário e senha.
Expanda a opção Armazenamento & Banco de dados, selecione a pasta de dados padrão (/var/www/html/data)
Selecione MySQL/MariaDB, coloque as informações do banco:
usuário, senha, nome do banco e host(nome ou IP). O banco não precisa existir, mas se tiver deverá apagar.
A aplicação cria a tabela a partir do nome colocado.
Clique em concluir a instalação.
Após a instalação coloque o usuário e senha de administrador.

__Configurando_________________________________________________________________
Defina o ESCOPO do seu projeto, ou as REGRAS de utilização. Explicarei as minhas e poderá copiar.
_______________________________________________________________________________
R01 (Regra 01) - Nossos usuários terão de fazer diagramas.
_______________________________________________________________________________
Vamos instalar a aplicação Drawio.
Vá em menu Arquivos, Market, procure por Drawio, abra e instale.
DESENVOLVEDOR Tom Needham, VERSÃO 0.0.8, RELEASE 13 de Ago de 2018, DATE General Public License, LICENÇA Version 2
Para testar vá nos arquivos e adicione um diagrama. Se abrir a tela de edição é porque funcionou.
_______________________________________________________________________________
R02 - Compartilhamento de pasta do administrador para grupo específico
_______________________________________________________________________________
__Criar um grupo_______________________________________________________________
Com a conta de administrador, clique no seu usuário, lado superior direito, Usuários, 
Adicione um grupo chamado Biblioteca
_______________________________________________________________________________
__Configurar Compartilhamento__________________________________________________
Com a conta de administrador, clique no seu usuário, lado superior direito, Configurações
No lado esquerdo, Admin, Compartilhamento
Permitir que aplicativos usem a API de Compartilhamento
Permitir o compartilhamento com grupos
Excluir grupos de compartilhamento
 biblioteca
Restringir a enumeração aos membros do grupo
Campo extra para exibir em resultados de preenchimento automático
 ID do usuário
Group Sharing Blacklist
 Exclude groups from receiving shares
  biblioteca
_______________________________________________________________________________
R03 - Limitar a quantidade de espaço para cada usuário em 1GB.
_______________________________________________________________________________
Com a conta de administrador, clique no seu usuário, lado superior direito, Usuários, 
Clique na engrenagem no lado inferior esquerdo, Quota padrão 1BG.
Selecione as opções:
Mostrar o último acesso
Mostrar o endereço de email

Para o administrador dê a cota de 10GB para postar os arquivos.
_______________________________________________________________________________
R04 - Leitura de PDF
_______________________________________________________________________________
Ao clicar num PDF o sistema baixa, mas queremos ler. Vamos instalar o leitor.
Vá em Menu, Market, ache o PDF Viewer.
DESENVOLVEDOR: ownCloud, 	VERSÃO: 0.11.0, RELEASE DATE: 11 de Abr de 2019,LICENÇA: GNU Affero General Public License
_______________________________________________________________________________
R05 - Gallery
_______________________________________________________________________________
Mostrar as imagens em formato de galeria.
Vá em Menu, Market, ache o Gallery
DESENVOLVEDOR: ownCloud, VERSÃO: 16.1.1, RELEASE DATE: 10 de Dez de 2018,LICENÇA: GNU Affero General Public License
_______________________________________________________________________________
R06 - Brute-Force Protection
_______________________________________________________________________________
Impedir que tentem logar com brute force.

Vá em Menu, Market, ache o Brute-Force Protection
DESENVOLVEDOR: Semih Serhat Karakaya, VERSÃO: 1.0.1,	RELEASE DATE: 6 de Dez de 2018,	LICENÇA: General Public License, Version 2
Funcionamento: depois de várias tentativas ele trava, e devemos esperar. Mesmo digitando a correta tem de esperar.
_______________________________________________________________________________
_______________________________________________________________________________
https://doc.owncloud.org/server/10.1/admin_manual/configuration/server/occ_command.html#command-line-upgrade
UPGRADE
docker exec -it 895 bash
su www-data -s /bin/sh

php occ maintenance:mode --on

php occ upgrade --help
php occ upgrade

Atualizando para a versaõ 10.1.1
Deu defeito...
php occ app:disable files_opds
php occ app:disable files_reader
php occ app:disable groupalert
php occ app:disable polls
php occ app:disable files_paperhive

php occ upgrade
Atualizando para a versão 10.3.2.2
php occ app:disable drawio
php occ app:disable wallpaper

Atualizando para a versão 10.4.1


php occ maintenance:mode --off


_______________________________________________________________________________
https://software.opensuse.org/download/package?project=isv:ownCloud:desktop&package=owncloud-client
owncloud-client

Para CentOS 7.6 execute o seguinte como root:
cd /etc/yum.repos.d/
wget https://download.opensuse.org/repositories/isv:ownCloud:desktop/CentOS_7.6/isv:ownCloud:desktop.repo
yum install owncloud-client

_______________________________________________________________________________
__INSTALANDO COM MYSQL_________________________________________________________
Instale o MySQL e o PHPmyAdmin, veja em no arquivo deste mesmo diretório mysql.txt

Vamos rodar outra instância do nextcloud, na mesma rede do mysql
docker run \
  -d \
  -p 80:80 \
  --network mysql \
  owncloud

89

Não é necessário criar a base de dados, mas é necessário excluir caso exista

Crie um usuário e uma senha de administrador
Em Armazenamento & banco de dados...
Pasta de dados /var/www/html/data

Selecione o banco de dados: MySQL
usuario (do mySQL): root
senha (do mySQL): my-password
nome (do banco): owncloud
nome do host e porta: mysql.5.7.wp

Evite trabalhar com IP de host. Trabalhe sempre com o nome (neste caso é mysql.5.7.wp)
_______________________________________________________________________________
__CONFIGURAÇÕES________________________________________________________________
Autorizar domínio
docker ps -a
89
docker stop 89
Abra outra tela de terminal com Ctrl+Shift+T
Como o container não tem editor de texto, copiaremos o arquivo para fora, editaremos, depois devolveremos.
copie a pasta do container para o seu diretório atual
pode usar os dois primeiros dígitos
docker cp 89:/var/www/html/config/config.php config.php

verifique se realmente copiou
ls -la

Abra-os para edição, destrave o terminal com &
gedit config.php &

Faça as alterações conforme a seguir, não substitua tudo, apenas complete com sua necessidade.
No meu caso adicionei o site "seuSite.com"

'trusted_domains' =>
array(
    0 => 'localhost',
    1 => 'seuSite.com'
)

Salve com Ctrl+S

Cole novamente dentro do container (não se esqueça que cd é o id do container) .
docker cp config.php 89:/var/www/html/config/config.php

Mude o dono imediatamente (se mexer no site dará erro)
docker start 89
docker exec -it 89 bash
cd config
ls -la
chown www-data config.php
ls -la

Reinicie o container...
docker restart 89

_______________________________________________________________________________
Instalar (SQLite)
Crie uma conta de administrador
Apenas para teste escolha a base SQLite, na pasta padrão /var/www/html/data
Clique em concluir
___________________________________________________________________________________
APLICAÇÕES
Custom Groups
ok Gallery
ok PDF Viewer
ok Drawio
Carnet ()
Contacts
Activity
Polls
Tasks
Wallpaper
OK Brute-Force Protection

___________________________________________________________________________________
https://hub.docker.com/_/owncloud
owncloud.org

docker run -d -p 80:80 owncloud:8.1

For a MySQL database you can link an database container, e.g. --link my-mysql:mysql, and then use mysql as the database host on setup.

ownCloud is a self-hosted file sync and share server.

ownCloud is a self-hosted file sync and share server. It provides access to your data through a web interface, sync clients or WebDAV while providing a platform to view, sync and share across devices easily—all under your control. ownCloud’s open architecture is extensible via a simple but powerful API for applications and plugins and it works with any storage.

Persistent data
All data beyond what lives in the database (file uploads, etc) is stored within the default volume /var/www/html. With this volume, ownCloud will only be updated when the file version.php is not present.

-v /<mydatalocation>:/var/www/html
For fine grained data persistence, you can use 3 volumes, as shown below.

-v /<mydatalocation>/apps:/var/www/html/apps installed / modified apps
-v /<mydatalocation>/config:/var/www/html/config local configuration
-v /<mydatalocation>/data:/var/www/html/data the actual data of your ownCloud

docker exec -u www-data some-owncloud php occ status

Example stack.yml for owncloud:

# ownCloud with MariaDB/MySQL
#
# Access via "http://localhost:8080" (or "http://$(docker-machine ip):8080" if using docker-machine)
#
# During initial ownCloud setup, select "Storage & database" --> "Configure the database" --> "MySQL/MariaDB"
# Database user: root
# Database password: example
# Database name: pick any name
# Database host: replace "localhost" with "mysql"

version: '3.1'

services:

  owncloud:
    image: owncloud
    restart: always
    ports:
      - 8080:80

  mysql:
    image: mariadb
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: example

Run docker stack deploy -c stack.yml owncloud (or docker-compose -f stack.yml up), wait for it to initialize completely, and visit http://swarm-ip:8080/, http://localhost:8080/, or http://host-ip:8080 (as appropriate).

