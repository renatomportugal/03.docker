Baixar
docker pull owncloud
_______________________________________________________________________________
__INSATALANDO COM MYSQL________________________________________________________
Instale o MySQL e o PHPmyAdmin, veja em no arquivo deste mesmo diretório mysql.txt

Vamos rodar outra instância do nextcloud, na mesma rede do mysql
docker run \
  -d \
  -p 80:80 \
  --network mysql \
  owncloud

89

Não é necessário criar a base de dados, mas é necessário excluir caso exista

Crie um usuário e uma senha de administrador
Em Armazenamento & banco de dados...
Pasta de dados /var/www/html/data

Selecione o banco de dados: MySQL
usuario (do mySQL): root
senha (do mySQL): my-password
nome (do banco): owncloud
nome do host e porta: mysql.5.7.wp

Evite trabalhar com IP de host. Trabalhe sempre com o nome (neste caso é mysql.5.7.wp)
_______________________________________________________________________________
__CONFIGURAÇÕES________________________________________________________________
Autorizar domínio
docker ps -a
89
docker stop 89
Abra outra tela de terminal com Ctrl+Shift+T
Como o container não tem editor de texto, copiaremos o arquivo para fora, editaremos, depois devolveremos.
copie a pasta do container para o seu diretório atual
pode usar os dois primeiros dígitos
docker cp 89:/var/www/html/config/config.php config.php

verifique se realmente copiou
ls -la

Abra-os para edição, destrave o terminal com &
gedit config.php &

Faça as alterações conforme a seguir, não substitua tudo, apenas complete com sua necessidade.
No meu caso adicionei o site "seuSite.com"

'trusted_domains' =>
array(
    0 => 'localhost',
    1 => 'seuSite.com'
)

Salve com Ctrl+S

Cole novamente dentro do container (não se esqueça que cd é o id do container) .
docker cp config.php 89:/var/www/html/config/config.php

Mude o dono imediatamente (se mexer no site dará erro)
docker start 89
docker exec -it 89 bash
cd config
ls -la
chown www-data config.php
ls -la

Reinicie o container...
docker restart 89

_______________________________________________________________________________
Instalar (SQLite)
Crie uma conta de administrador
Apenas para teste escolha a base SQLite, na pasta padrão /var/www/html/data
Clique em concluir
___________________________________________________________________________________
APLICATIVOS

___________________________________________________________________________________
https://hub.docker.com/_/owncloud
owncloud.org

docker run -d -p 80:80 owncloud:8.1

For a MySQL database you can link an database container, e.g. --link my-mysql:mysql, and then use mysql as the database host on setup.

ownCloud is a self-hosted file sync and share server.

ownCloud is a self-hosted file sync and share server. It provides access to your data through a web interface, sync clients or WebDAV while providing a platform to view, sync and share across devices easily—all under your control. ownCloud’s open architecture is extensible via a simple but powerful API for applications and plugins and it works with any storage.

Persistent data
All data beyond what lives in the database (file uploads, etc) is stored within the default volume /var/www/html. With this volume, ownCloud will only be updated when the file version.php is not present.

-v /<mydatalocation>:/var/www/html
For fine grained data persistence, you can use 3 volumes, as shown below.

-v /<mydatalocation>/apps:/var/www/html/apps installed / modified apps
-v /<mydatalocation>/config:/var/www/html/config local configuration
-v /<mydatalocation>/data:/var/www/html/data the actual data of your ownCloud

docker exec -u www-data some-owncloud php occ status

Example stack.yml for owncloud:

# ownCloud with MariaDB/MySQL
#
# Access via "http://localhost:8080" (or "http://$(docker-machine ip):8080" if using docker-machine)
#
# During initial ownCloud setup, select "Storage & database" --> "Configure the database" --> "MySQL/MariaDB"
# Database user: root
# Database password: example
# Database name: pick any name
# Database host: replace "localhost" with "mysql"

version: '3.1'

services:

  owncloud:
    image: owncloud
    restart: always
    ports:
      - 8080:80

  mysql:
    image: mariadb
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: example

Run docker stack deploy -c stack.yml owncloud (or docker-compose -f stack.yml up), wait for it to initialize completely, and visit http://swarm-ip:8080/, http://localhost:8080/, or http://host-ip:8080 (as appropriate).

