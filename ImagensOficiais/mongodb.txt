__Baixar
docker pull mongo
_______________________________________________________________
__Rodar
docker run \
    -d \
    --network mysql \
    --name mongo \
    mongo
_______________________________________________________________
__Executar
docker run -it mongo
docker exec -it b0

_______________________________________________________________
docker run mongo

abra outro terminal
docker ps
veja qual o id
docker exec -it 64 bash
ls
mostrar os processos
ps -e

abrir outro processo
abra outra janela de terminal
docker exec -it 64 sh
ps -e

__Inspecionando o Docker
docker ps
docker inspect 64

na tela de terminal do 64, digite
ls /usr/local/bin

more /usr/local/bin/docker-entrypoint.sh
ls /usr/bin

__Criando um Mongo Database
docker ps
docker exec -it 64 mongo
db.version()
show dbs
use test
db
db.animals.insert({"animal": "cat"})
db.animals.insert({"animal": "dog"})
db.animals.insert({"animal": "monkey"})
db.animals.find()
exit
docker ps
docker stop 64
docker ps

vamos criar mais um container
docker run mongo

conectar com o mongo
docker exec -it 57 mongo
show dbs
exit
docker stop 57

agora vamos abrir o container 64
docker ps -a
docker start 64
docker ps
docker exec -it 64 mongo
show dbs
use test
db.animals.find()

__Persistent database
exit
docker ps -a
docker container prune -f
docker stop 64
docker start 64
docker ps
docker exec -it 64 bash
ls
ls data
ls data/db

exit
docker stop 64
docker ps
docker rm 64
docker ps -a

vamos criar uma pasta mongo dentro da pasta container
cd /home/usuario/Desktop/containers
mkdir mongo
cd mongo
mkdir db
ls db


vamos rodar uma instância do mongo em background (-d)
docker run -d -v $PWD/db:/data/db mongo
docker ps

agora verá  que a pasta contém os arquivos de banco de dados
ls db

docker ps
docker exec -it 57 bash
mongo
show dbs

vamos criar um db
use mydb
db.posts.insert({"post": "Hey there."})
db.posts.insert({"post": "How are you?"})
db.posts.insert({"post": "Doing well."})

vejamos o que tem
db.posts.find()
exit
exit
docker ps
ls db
ls -la db

cat db/index-9-2421615610053107849.wt

agora vamos remover o container e ver se os dados irão persistir
docker ps
docker stop 57
docker rm 57
docker ps
docker ps -a

não há mais containers, iremos criar um
docker run -d -v $PWD/db:/data/db mongo

docker ps
docker exec -it 70 mongo

veja que mydb está no novo container
show dbs

use mydb
db.posts.find()
exit
docker ps
docker stop 70
docker rm 70
